import Conf from 'conf';
import packageJson from './packageJson.js';

const config = new Conf<credentialsType>({
	schema: {
		name: {	type: 'string' },
		password: { type: 'string' }
	},
	projectName: packageJson.name,
	projectVersion: packageJson.version
});

export type credentialsType = {
	name?: string,
	password?: string
}

export let credentials : credentialsType = {
	name: config.get('name'),
	password: config.get('password')
};

export const loggedIn = () => {return Boolean(credentials.name && credentials.password);};

export function setCredentials(creds: credentialsType){
	config.set('name', creds.name);
	config.set('password', creds.password);
	credentials = creds;
}

export function deleteCredentials(){
	config.clear();
	credentials = {};
}